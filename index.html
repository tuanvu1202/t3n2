<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="game-app">
  <div id="container">
    <div id="screen-home" class="screen active">
      <h1 style="color: #ffde59; text-shadow: 2px 2px #000; font-size: 28px;">ü§ñ Learn & Play with AI</h1>
      <p>Ch·ªçn ƒë·ªô kh√≥ ƒë·ªÉ b·∫Øt ƒë·∫ßu:</p>
      <div class="menu">
        <button class="btn btn-easy" onclick="setDiff('Easy')">EASY</button>
        <button class="btn btn-med" onclick="setDiff('Medium')">MEDIUM</button>
        <button class="btn btn-hard" onclick="setDiff('Hard')">HARD</button>
      </div>
    </div>

    <div id="screen-modes" class="screen">
      <h2 id="diff-tag" style="color: #ffde59; text-transform: uppercase;"></h2>
      <button class="btn mode-btn" onclick="startQuiz('Vocabulary')">Vocabulary</button>
      <button class="btn mode-btn" onclick="startQuiz('Grammar')">Grammar</button>
      <button class="btn mode-btn" onclick="startQuiz('Sentence')">Sentence</button>
      <button class="btn-back" onclick="showScreen('screen-home')">Quay l·∫°i</button>
    </div>

    <div id="screen-quiz" class="screen">
      <div id="q-header">
        <span id="q-count"></span>
        <div class="progress-container"><div id="bar"></div></div>
      </div>
      <h3 id="question-text" style="min-height: 50px;"></h3>
      <div id="options-box"></div>
      <p id="instant-feedback"></p>
    </div>

    <div id="screen-result" class="screen">
      <h2 id="result-title"></h2>
      <img id="meme-result" src="" alt="Meme Result">
      <p id="result-text"></p>
      <button class="btn btn-easy" onclick="showScreen('screen-modes')">Ch∆°i ti·∫øp ch·ªß ƒë·ªÅ n√†y</button>
      <button class="btn-back" onclick="showScreen('screen-home')">V·ªÅ m√†n h√¨nh ch√≠nh</button>
    </div>
  </div>
</div>

<style>
  body { background: #1a1a2e; font-family: 'Segoe UI', sans-serif; color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow-x: hidden; }
  #container { background: #16213e; width: 90%; max-width: 450px; padding: 25px; border-radius: 20px; text-align: center; border: 4px solid #e94560; box-shadow: 0 10px 30px rgba(0,0,0,0.5); position: relative; }
  .screen { display: none; }
  .active { display: block; animation: fadeIn 0.4s ease; }
  @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
  .btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border: none; border-radius: 10px; font-size: 17px; font-weight: bold; cursor: pointer; transition: 0.2s; }
  .btn:active { transform: scale(0.97); }
  .btn-easy { background: #4CAF50; color: white; }
  .btn-med { background: #FFC107; color: #1a1a2e; }
  .btn-hard { background: #F44336; color: white; }
  .mode-btn { background: #0f3460; color: white; border: 1px solid #e94560; }
  .ans-btn { background: #ffffff1a; color: white; border: 1px solid #ffffff33; margin: 8px 0; text-align: left; padding-left: 15px; font-size: 16px; font-weight: normal; }
  .ans-btn:hover:not(:disabled) { background: #e94560; border-color: #e94560; }
  #meme-result { width: 100%; max-width: 250px; border-radius: 15px; display: none; margin: 15px auto; border: 3px solid #fff; }
  .progress-container { background: #0f3460; height: 10px; border-radius: 5px; margin: 10px 0; overflow: hidden; }
  #bar { height: 100%; background: #e94560; width: 0%; transition: 0.3s; }
  #instant-feedback { height: 20px; font-weight: bold; margin-top: 10px; font-size: 1.1rem; }
  .btn-back { background: none; color: #999; border: none; cursor: pointer; text-decoration: underline; margin-top: 10px; }
</style>

<script>
  // Link Meme ch√≠nh x√°c theo th·ª© t·ª±
  const memesWrong = [ "https://sgs2.seeai.cc/common/c7b2f500f6d248119700552da7eabb4a1696713155223.jpg?x-oss-process=image/resize,w_800,m_lfit/quality,q_85/format,jpg", "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTY5TqaryF7NYO6_Owc48itB9xeXCQJVLPIIOimVo-XaIRnLD9RA13XRKfKccm6rV7iLDQ", "https://i.pinimg.com/736x/72/1b/11/721b11322e890e5ec46ed3c7a2c07190.jpg" ]; const memesCorrect = [ "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcStOU6D7bjPTtUaU_UF0mqZpoNmvxU4YZWP52WG5NRr4sAMq8Mo13JgA-X96lVzHhkeVuU", "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTY130p_oIbheAr9n_2QUUfd4S5z-RxNR_NgBCaqw7Vbf6Syw2RliXAb-eeokMz_GgPJFw", "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSXHrhULKpz_EyPSppxOvcAzZK1VFfg1TxT9ZMpRMoATil41dqybfmU615kCzcDNpJNx0I" ];

  // √Çm thanh
  const soundCorrect = new Audio('https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3');
  const soundWrong = new Audio('https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3');

  // D·ªØ li·ªáu 27 c√¢u h·ªèi ƒë·∫ßy ƒë·ªß
  const gameData = {
    Easy: {
      Vocabulary: [{q: "virtual nghƒ©a l√† g√¨?", a: "·∫£o", opts: ["·∫£o", "con ng∆∞·ªùi", "s·ª± th·∫≠t"]}, {q: "chatbot nghƒ©a l√† g√¨?", a: "h·ªôp tr√≤ chuy·ªán", opts: ["h·ªôp tr√≤ chuy·ªán", "n√≥i chuy·ªán", "k·ªÉ chuy·ªán"]}, {q: "data nghƒ©a l√† g√¨?", a: "d·ªØ li·ªáu", opts: ["d·ªØ li·ªáu", "l∆∞u d·ªØ", "th√¥ng tin"]}],
      Grammar: [{q: "AI_____people work faster.", a: "helps", opts: ["helps", "help", "are help", "helping"]}, {q: "Machines_____learn from data.", a: "can", opts: ["does", "can", "are", "is"]}, {q: "My smartphone_____very smart.", a: "is", opts: ["be", "are", "am", "is"]}],
      Sentence: [{q: "AI_____a lot of data to learn.", a: "needs", opts: ["need", "needs", "needing", "is need"]}, {q: "Robots_____perform dangerous tasks.", a: "can", opts: ["can", "are", "do", "is"]}, {q: "This smart camera_____very modern.", a: "is", opts: ["am", "are", "is", "be"]}]
    },
    Medium: {
      Vocabulary: [{q: "upgrade nghƒ©a l√† g√¨?", a: "n√¢ng c·∫•p", opts: ["n√¢ng c·∫•p", "l√™n c·∫•p", "t·∫°m d·ª´ng"]}, {q: "programme nghƒ©a l√† g√¨?", a: "l·∫≠p tr√¨nh", opts: ["l·∫≠p tr√¨nh", "t·ª± ƒë·ªông", "v·∫•n ƒë·ªÅ"]}, {q: "advanced nghƒ©a l√† g√¨?", a: "ti√™n ti·∫øn", opts: ["ti√™n ti·∫øn", "qu·∫£ng c√°o", "th·ªùi ƒë·ªì ƒë√°"]}],
      Grammar: [{q: "Scientists_____new AI models recently.", a: "have developed", opts: ["has developed", "have developed", "developing", "was develop"]}, {q: "B·ªã ƒë·ªông: 'People use smartphones...'", a: "Smartphones are used for many daily tasks.", opts: ["Smartphones are used for many daily tasks.", "Smartphones are use...", "Smartphones is used...", "Smartphones were use..."]}, {q: "V·ªã tr√≠ 'often': Smart devices collect info.", a: "often / ‚àÖ", opts: ["often / ‚àÖ", "‚àÖ / often", "are often / ‚àÖ", "oftenly / ‚àÖ"]}],
      Sentence: [{q: "Many new apps_____by developers this year.", a: "have been created", opts: ["have been created", "has been created", "are create", "created"]}, {q: "Machines_____solve complex problems.", a: "quickly", opts: ["quick", "quickly", "more quick", "quickest"]}, {q: "We_____used AI for a long time.", a: "have", opts: ["are", "did", "have", "has"]}]
    },
    Hard: {
      Vocabulary: [{q: "Artificial Intelligence l√† g√¨?", a: "tr√≠ tu·ªá nh√¢n t·∫°o", opts: ["tr√≠ tu·ªá nh√¢n t·∫°o", "tr√≠ tu·ªá t·ª± nhi√™n", "ngh·ªá thu·∫≠t th·ªß c√¥ng"]}, {q: "Algorithm l√† g√¨?", a: "thu·∫≠t to√°n", opts: ["thu·∫≠t to√°n", "ƒë·∫°i s·ªë", "ng·∫´u nhi√™n"]}, {q: "Neural Network l√† g√¨?", a: "m·∫°ng n∆°-ron", opts: ["m·∫°ng n∆°-ron", "m·∫°ng to√†n c·∫ßu", "kh√¥ng k·∫øt n·ªëi"]}],
      Grammar: [{q: "If the company_____last year, they_____.", a: "had invested / would have achieved", opts: ["invested / would achieve", "invests / will achieve", "had invested / would have achieved", "has invested / achieved"]}, {q: "Reduced relative: 'The devices_____in that factory...'", a: "manufactured", opts: ["manufactured", "which manufactured", "manufacturing", "manufacture"]}, {q: "Inversion: 'Not only_____smart machines...'", a: "do", opts: ["do", "are", "does", "have"]}],
      Sentence: [{q: "The AI system_____by that team is advanced.", a: "developed", opts: ["developing", "developed", "was developed", "which developed"]}, {q: "If power had gone out, the server_____.", a: "would have stopped", opts: ["would stop", "will stop", "would have stopped", "stopped"]}, {q: "Inversion: 'Not only_____images, but AI composes music.'", a: "does it generate", opts: ["does it generate", "it generates", "did it generated", "it generate"]}]
    }
  };

  let currentDiff = '', questions = [], currentIndex = 0, score = 0;

  function shuffle(array) {
    let m = array.length, t, i;
    while (m) {
      i = Math.floor(Math.random() * m--);
      t = array[m];
      array[m] = array[i];
      array[i] = t;
    }
    return array;
  }

  function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    // Reset Meme n·∫øu quay v·ªÅ m√†n h√¨nh ch·ªçn
    if (id === 'screen-modes' || id === 'screen-home') {
      document.getElementById('meme-result').style.display = "none";
    }
  }

  function setDiff(d) {
    currentDiff = d;
    document.getElementById('diff-tag').innerText = "C·∫•p ƒë·ªô: " + d;
    showScreen('screen-modes');
    // K√≠ch ho·∫°t √¢m thanh (bypass autoplay policy)
    soundCorrect.play().then(() => { soundCorrect.pause(); soundCorrect.currentTime = 0; });
  }

  function startQuiz(m) {
    // ƒê·∫£m b·∫£o l·∫•y d·ªØ li·ªáu m·ªõi v√† x√°o tr·ªôn ho√†n to√†n
    questions = shuffle(JSON.parse(JSON.stringify(gameData[currentDiff][m])));
    currentIndex = 0;
    score = 0;
    showScreen('screen-quiz');
    loadQuestion();
  }

  function loadQuestion() {
    const q = questions[currentIndex];
    document.getElementById('q-count').innerText = `C√¢u ${currentIndex + 1}/3`;
    document.getElementById('bar').style.width = ((currentIndex) / 3 * 100) + "%";
    document.getElementById('question-text').innerText = q.q;
    document.getElementById('instant-feedback').innerText = "";
    
    const box = document.getElementById('options-box');
    box.innerHTML = "";
    
    // X√°o tr·ªôn ƒë√°p √°n nh∆∞ m√£ ƒë·ªÅ thi
    const shuffledOpts = shuffle([...q.opts]);
    shuffledOpts.forEach(opt => {
      const btn = document.createElement('button');
      btn.className = "btn ans-btn";
      btn.innerText = opt;
      btn.onclick = () => handleAnswer(opt, q.a);
      box.appendChild(btn);
    });
  }

  function handleAnswer(selected, correct) {
    const feedback = document.getElementById('instant-feedback');
    const btns = document.querySelectorAll('.ans-btn');
    btns.forEach(b => b.disabled = true);

    if (selected === correct) {
      score++;
      soundCorrect.currentTime = 0;
      soundCorrect.play().catch(()=>{});
      feedback.innerText = "Ch√≠nh x√°c! ‚ú®";
      feedback.style.color = "#2ecc71";
    } else {
      soundWrong.currentTime = 0;
      soundWrong.play().catch(()=>{});
      feedback.innerText = "Sai r·ªìi! ‚ùå";
      feedback.style.color = "#e74c3c";
    }

    setTimeout(() => {
      currentIndex++;
      if (currentIndex < 3) {
        loadQuestion();
      } else {
        document.getElementById('bar').style.width = "100%";
        showMemeResult();
      }
    }, 1100);
  }

  function showMemeResult() {
    showScreen('screen-result');
    const memeImg = document.getElementById('meme-result');
    const resText = document.getElementById('result-text');
    const resTitle = document.getElementById('result-title');
    memeImg.style.display = "block";

    // Logic Meme theo t·ªâ l·ªá ƒê√∫ng/Sai (ƒê√∫ng >= 2 c√¢u l√† t·ªâ l·ªá cao)
    if (score >= 2) {
      resTitle.innerText = "XU·∫§T S·∫ÆC!";
      resTitle.style.color = "#2ecc71";
      memeImg.src = memesCorrect[Math.floor(Math.random() * 3)];
      resText.innerText = `B·∫°n ƒë√£ ho√†n th√†nh v·ªõi ${score}/3 c√¢u ƒë√∫ng!`;
    } else {
      resTitle.innerText = "C·ªê G·∫ÆNG L√äN!";
      resTitle.style.color = "#e74c3c";
      memeImg.src = memesWrong[Math.floor(Math.random() * 3)];
      resText.innerText = `B·∫°n ch·ªâ ƒë√∫ng ${score}/3 c√¢u. H√£y luy·ªán t·∫≠p th√™m!`;
    }
  }
</script>
</body>
</html>
